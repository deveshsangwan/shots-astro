---
import { navigation, siteConfig } from "@/config/site";
import { withBase } from "@/utils/withBase";

const pathname = Astro.url.pathname;
const homeHref = withBase();
---

<header class="sticky top-0 z-40 border-b border-white/10 bg-bg/80 backdrop-blur-md">
  <div class="mx-auto flex w-full max-w-7xl items-center justify-between px-5 py-4 md:px-8">
    <a href={homeHref} class="group">
      <p class="font-display text-xl tracking-wide text-text md:text-2xl">{siteConfig.title}</p>
      <p class="text-xs tracking-[0.2em] text-muted uppercase transition-colors group-hover:text-accent">
        {siteConfig.subtitle}
      </p>
    </a>
    <nav aria-label="Main navigation" class="flex items-center gap-2 rounded-full border border-white/10 bg-surface/70 p-1">
      {navigation.map((item) => {
        const href = item.href === "/" ? homeHref : withBase(item.href);
        const normalizedHref = href.replace(/\/$/, "");
        const normalizedPathname = pathname.replace(/\/$/, "");
        const isActive = normalizedPathname === normalizedHref;

        return (
          <a
            href={href}
            class:list={[
              "rounded-full px-4 py-2 text-sm transition-colors",
              isActive
                ? "bg-accent text-black"
                : "text-muted hover:bg-white/5 hover:text-text focus-visible:bg-white/5 focus-visible:text-text"
            ]}
          >
            {item.label}
          </a>
        );
      })}
    </nav>
  </div>
</header>
